# =============================================================================
# Scryer 环境变量配置模板
# =============================================================================
# 使用说明：
# 1. 复制本文件为 .env: cp .env.example .env
# 2. 根据实际环境修改配置值
# 3. .env 文件已加入 .gitignore，不会被提交到版本控制
# =============================================================================

# -----------------------------------------------------------------------------
# 应用基础配置
# -----------------------------------------------------------------------------
APP_NAME=Scryer
APP_VERSION=0.1.0

# 运行环境: development, production, testing
ENVIRONMENT=development

# 调试模式: true, false, 1, 0, yes, no
# 注意：当 ENVIRONMENT=development 时会自动启用 debug
DEBUG=true

# -----------------------------------------------------------------------------
# API 配置
# -----------------------------------------------------------------------------
# API 路由前缀
API_PREFIX=/api

# 服务端口号 (1-65535)
PORT=8000

# -----------------------------------------------------------------------------
# 数据库配置
# -----------------------------------------------------------------------------
# PostgreSQL 连接 URL（异步驱动）
# 格式: postgresql+asyncpg://用户名:密码@主机:端口/数据库名
# 注意：必须使用 asyncpg 驱动以支持异步操作
DATABASE_URL=postgresql+asyncpg://scryer:your_secure_password@localhost:5432/scryer

# 连接池配置
# DB_POOL_SIZE: 连接池大小（默认: 5）
# DB_MAX_OVERFLOW: 最大溢出连接数（默认: 10）
# DB_POOL_TIMEOUT: 连接超时时间，单位秒（默认: 30）
# DB_POOL_RECYCLE: 连接回收时间，单位秒，-1 表示不回收（默认: 3600）
# DB_ECHO_POOL: 是否记录连接池日志（默认: false）
# DB_ECHO: 是否记录 SQL 日志（默认: false）
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO_POOL=false
DB_ECHO=false

# -----------------------------------------------------------------------------
# Redis 配置
# -----------------------------------------------------------------------------
# Redis 连接 URL
# 格式: redis://主机:端口/数据库索引
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Docker 基础设施配置
# -----------------------------------------------------------------------------
# PostgreSQL Docker 服务配置
# 注意：这些变量仅在 Docker Compose 环境中使用
# docker-compose.yml 会使用这些变量配置 PostgreSQL 容器
POSTGRES_USER=scryer
POSTGRES_PASSWORD=scryer_dev_password_change_me
POSTGRES_DB=scryer

# Redis Docker 服务配置 (当前版本不使用密码)
# REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# 安全配置
# -----------------------------------------------------------------------------
# 应用密钥（至少 32 字符）
# 用于加密签名等安全操作，生产环境必须修改为随机字符串
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change-this-to-a-random-string-at-least-32-characters-long

# JWT 认证配置
# JWT 密钥（至少 32 字符，用于签名和验证 JWT Token）
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=change-this-to-a-random-string-at-least-32-characters-long

# JWT 签名算法（默认: HS256）
# 可选值: HS256 (HMAC-SHA256), RS256 (RSA-SHA256)
JWT_ALGORITHM=HS256

# JWT 访问 Token 过期时间，单位分钟（默认: 30）
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# JWT 刷新 Token 过期时间，单位天（默认: 7）
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# CORS 配置
# -----------------------------------------------------------------------------
# 允许的跨域源列表（逗号分隔）
# 示例: http://localhost:3000,https://example.com
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# -----------------------------------------------------------------------------
# 日志配置
# -----------------------------------------------------------------------------
# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =============================================================================
# 配置说明
# =============================================================================
#
# 敏感信息处理：
# - DATABASE_URL 中的密码应使用强密码
# - SECRET_KEY 生产环境必须使用随机生成的密钥
# - 切勿将包含真实密码的 .env 文件提交到版本控制
#
# 环境差异：
# - development: 开发环境，启用 debug，详细日志
# - production: 生产环境，关闭 debug，精简日志
# - testing: 测试环境，启用 debug，使用测试数据库
#
# 默认行为：
# - 未设置 DEBUG 时，会根据 ENVIRONMENT 自动设置：
#   development/testing -> DEBUG=true
#   production -> DEBUG=false
# =============================================================================
