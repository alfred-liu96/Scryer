#!/usr/bin/env python3
"""
åˆ›å»º .env.example æ–‡ä»¶çš„è„šæœ¬
"""
import os

content = """# =============================================================================  # noqa: E501
# =============================================================================
# ä½¿ç”¨è¯´æ˜ï¼š
# 1. å¤åˆ¶æœ¬æ–‡ä»¶ä¸º .env: cp .env.example .env
# 2. æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹é…ç½®å€¼
# 3. .env æ–‡ä»¶å·²åŠ å…¥ .gitignoreï¼Œä¸ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
# =============================================================================

# -----------------------------------------------------------------------------
# åº”ç”¨åŸºç¡€é…ç½®
# -----------------------------------------------------------------------------
APP_NAME=Scryer
APP_VERSION=0.1.0

# è¿è¡Œç¯å¢ƒ: development, production, testing
ENVIRONMENT=development

# è°ƒè¯•æ¨¡å¼: true, false, 1, 0, yes, no
# æ³¨æ„ï¼šå½“ ENVIRONMENT=development æ—¶ä¼šè‡ªåŠ¨å¯ç”¨ debug
DEBUG=true

# -----------------------------------------------------------------------------
# API é…ç½®
# -----------------------------------------------------------------------------
# API è·¯ç”±å‰ç¼€
API_PREFIX=/api

# æœåŠ¡ç«¯å£å· (1-65535)
PORT=8000

# -----------------------------------------------------------------------------
# æ•°æ®åº“é…ç½®
# -----------------------------------------------------------------------------
# PostgreSQL è¿æ¥ URL
# æ ¼å¼: postgresql://ç”¨æˆ·å:å¯†ç @ä¸»æœº:ç«¯å£/æ•°æ®åº“å
DATABASE_URL=postgresql://scryer:your_secure_password@localhost:5432/scryer

# -----------------------------------------------------------------------------
# Redis é…ç½®
# -----------------------------------------------------------------------------
# Redis è¿æ¥ URL
# æ ¼å¼: redis://ä¸»æœº:ç«¯å£/æ•°æ®åº“ç´¢å¼•
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# å®‰å…¨é…ç½®
# -----------------------------------------------------------------------------
# åº”ç”¨å¯†é’¥ï¼ˆè‡³å°‘ 32 å­—ç¬¦ï¼‰
# ç”¨äºåŠ å¯†ç­¾åç­‰å®‰å…¨æ“ä½œï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²
# ç”Ÿæˆæ–¹æ³•: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change-this-to-a-random-string-at-least-32-characters-long

# -----------------------------------------------------------------------------
# CORS é…ç½®
# -----------------------------------------------------------------------------
# å…è®¸çš„è·¨åŸŸæºåˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰
# ç¤ºä¾‹: http://localhost:3000,https://example.com
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# -----------------------------------------------------------------------------
# æ—¥å¿—é…ç½®
# -----------------------------------------------------------------------------
# æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =============================================================================
# é…ç½®è¯´æ˜
# =============================================================================
#
# æ•æ„Ÿä¿¡æ¯å¤„ç†ï¼š
# - DATABASE_URL ä¸­çš„å¯†ç åº”ä½¿ç”¨å¼ºå¯†ç 
# - SECRET_KEY ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨éšæœºç”Ÿæˆçš„å¯†é’¥
# - åˆ‡å‹¿å°†åŒ…å«çœŸå®å¯†ç çš„ .env æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
#
# ç¯å¢ƒå·®å¼‚ï¼š
# - development: å¼€å‘ç¯å¢ƒï¼Œå¯ç”¨ debugï¼Œè¯¦ç»†æ—¥å¿—
# - production: ç”Ÿäº§ç¯å¢ƒï¼Œå…³é—­ debugï¼Œç²¾ç®€æ—¥å¿—
# - testing: æµ‹è¯•ç¯å¢ƒï¼Œå¯ç”¨ debugï¼Œä½¿ç”¨æµ‹è¯•æ•°æ®åº“
#
# é»˜è®¤è¡Œä¸ºï¼š
# - æœªè®¾ç½® DEBUG æ—¶ï¼Œä¼šæ ¹æ® ENVIRONMENT è‡ªåŠ¨è®¾ç½®ï¼š
#   development/testing -> DEBUG=true
#   production -> DEBUG=false
# =============================================================================
"""


def main():
    file_path = ".env.example"

    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨
    if os.path.exists(file_path):
        print(f"âš ï¸  æ–‡ä»¶ {file_path} å·²å­˜åœ¨")
        return 0

    # å†™å…¥æ–‡ä»¶
    with open(file_path, "w", encoding="utf-8") as f:
        f.write(content)

    print(f"âœ… æ–‡ä»¶ {file_path} åˆ›å»ºæˆåŠŸ")
    print(f"   æ–‡ä»¶å¤§å°: {os.path.getsize(file_path)} å­—èŠ‚")

    # éªŒè¯å¿…éœ€çš„é…ç½®é¡¹
    required_keys = [
        "APP_NAME",
        "APP_VERSION",
        "DEBUG",
        "ENVIRONMENT",
        "API_PREFIX",
        "PORT",
        "DATABASE_URL",
        "REDIS_URL",
        "SECRET_KEY",
        "LOG_LEVEL",
        "CORS_ORIGINS",
    ]

    with open(file_path, "r", encoding="utf-8") as f:
        file_content = f.read()

    missing_keys = []
    for key in required_keys:
        if key in file_content:
            print(f"   âœ… {key}")
        else:
            print(f"   âŒ {key} ç¼ºå¤±")
            missing_keys.append(key)

    if not missing_keys:
        print("\nğŸ‰ æ‰€æœ‰å¿…éœ€çš„é…ç½®é¡¹éƒ½å·²åŒ…å«ï¼")
        return 0
    else:
        print(f"\nâŒ ç¼ºå¤±çš„é…ç½®é¡¹: {missing_keys}")
        return 1


if __name__ == "__main__":
    exit(main())
